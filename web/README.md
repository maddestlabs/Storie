# Web Directory

This directory contains web deployment files for Storie.

## SDL3 Architecture (Current)

Storie now uses SDL3 for rendering, which handles everything automatically via Emscripten.

### What You Need:

1. **index.html** - Minimal HTML wrapper with canvas element
2. **storie.js** - Generated by `./build-web.sh` (WASM output, overwritten on each build)
3. **storie.wasm** - Generated by `./build-web.sh` (WASM binary, overwritten on each build)
4. **index.md** - Markdown content with Nim code blocks (copied on build)

### What Changed from Terminal Version:

**OLD (Terminal Emulator):**
- Custom `storie.js` with terminal cell renderer
- JavaScript manually rendered each character cell
- WASM exposed `_emGetCell`, `_emHandleKeyPress`, etc.
- Complex input/output bridging

**NEW (SDL3):**
- SDL3 renders directly to canvas (automatic)
- No custom JavaScript interface needed
- SDL3 handles input/events natively
- Much simpler and more performant!

### Build Process:

```bash
# Build to this directory
./build-web.sh -o web

# Build to docs/ (default, for GitHub Pages)
./build-web.sh

# Build and serve locally
./build-web.sh -s
```

### Files:

- `index.html` - HTML wrapper (edit this for styling/layout)
- `storie.js` - Placeholder/docs (gets overwritten by build)
- `storie.terminal.OLD.js` - Old terminal emulator (deprecated, kept for reference)
- `assets/` - Fonts and other static assets

### How It Works:

1. SDL3 creates a canvas element
2. Nim code renders via SDL3 API calls
3. SDL3's Emscripten port translates to WebGL/Canvas2D
4. No manual cell rendering needed!

The `index.html` only needs:
- A canvas element with id="canvas"
- Module config for Emscripten
- Load `storie.js` (generated WASM output)

That's it! SDL3 does the rest.
